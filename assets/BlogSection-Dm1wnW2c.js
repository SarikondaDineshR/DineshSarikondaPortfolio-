import{r as p,j as e,m as h,A as w}from"./animations-D7XEHKlI.js";import{r as j}from"./react-three-7Ff-j0nv.js";import{d as f,p as N,B as S}from"./portfolioData-DN0b727e.js";import{u as v}from"./useInView-y9nnf0R3.js";import"./three-CCh1l0v_.js";const y="ds_portfolio_blogs";function C(s){return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function P({post:s,index:c,onDelete:a,isAdmin:x}){var t;const{ref:r,hasBeenInView:d}=v({threshold:.1}),[m,i]=p.useState(!1);return e.jsxs(h.div,{ref:r,initial:{opacity:0,y:36},animate:d?{opacity:1,y:0}:{},transition:{duration:.7,delay:c*.1,ease:[.22,1,.36,1]},className:"blog-card card-shine p-6 flex flex-col group",onClick:()=>i(!m),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.tags.slice(0,3).map(l=>e.jsx("span",{className:"text-[9px] px-2 py-0.5 border border-azure/20 text-azure/60 bg-azure/05 font-medium tracking-wider uppercase",onClick:u=>u.stopPropagation(),children:l},l))}),x&&e.jsx("button",{onClick:l=>{l.stopPropagation(),a(s.id)},className:"text-white/15 hover:text-red-400 transition-colors text-xs p-1 flex-shrink-0",title:"Delete post",children:"×"})]}),e.jsx("h3",{className:"text-[15px] font-bold text-white/85 group-hover:text-white leading-snug mb-3 transition-colors",children:s.title}),e.jsx(w,{children:m?e.jsxs(h.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:[e.jsx("p",{className:"text-[12px] text-white/45 leading-relaxed mb-3",children:s.excerpt}),s.content&&s.content!=="Full article content here..."&&e.jsx("p",{className:"text-[12px] text-white/35 leading-relaxed",children:s.content})]}):e.jsx("p",{className:"text-[12px] text-white/40 leading-relaxed line-clamp-2 flex-1",children:s.excerpt})}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-white/[0.05]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 flex items-center justify-center border border-azure/25 bg-azure/08 text-azure text-[9px] font-bold",children:((t=s.author)==null?void 0:t.charAt(0))||"D"}),e.jsx("span",{className:"text-[10px] text-white/30",children:s.author||N.name})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-white/25",children:[e.jsx("span",{children:C(s.date)}),e.jsx("span",{children:"·"}),e.jsx("span",{children:s.readTime}),e.jsx("span",{className:"text-azure/40 group-hover:text-azure transition-colors ml-1",children:m?"↑":"↓"})]})]})]})}function z({onClose:s,onSubmit:c}){const[a,x]=p.useState({title:"",excerpt:"",content:"",tags:"",readTime:"5 min read"}),[r,d]=p.useState({}),m=()=>{const t={};return a.title.trim()||(t.title="Title required"),a.excerpt.trim()||(t.excerpt="Excerpt required"),a.tags.trim()||(t.tags="At least one tag required"),t},i=t=>{t.preventDefault();const l=m();if(Object.keys(l).length){d(l);return}c({id:Date.now(),title:a.title.trim(),excerpt:a.excerpt.trim(),content:a.content.trim(),tags:a.tags.split(",").map(u=>u.trim()).filter(Boolean),readTime:a.readTime||"5 min read",date:new Date().toISOString().split("T")[0],author:N.name}),s()};return j.createPortal(e.jsx("div",{className:"modal-overlay",onClick:s,children:e.jsxs(h.div,{initial:{opacity:0,scale:.93,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.93,y:20},transition:{duration:.3,ease:[.22,1,.36,1]},className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto modal-scroll",style:{background:"#0C1120",border:"1px solid rgba(0,127,255,0.2)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/[0.06]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Add New Post"}),e.jsx("p",{className:"text-white/35 text-xs mt-0.5",children:"Publish to your portfolio blog"})]}),e.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center border border-white/10 text-white/40 hover:text-white hover:border-white/25 transition-all text-lg",children:"×"})]}),e.jsxs("form",{onSubmit:i,className:"p-6 flex flex-col gap-5",children:[[{name:"title",label:"Post Title",placeholder:"Building Microservices with .NET 8...",type:"input"},{name:"excerpt",label:"Short Excerpt (shown on card)",placeholder:"A concise 1-2 sentence summary...",type:"textarea",rows:2},{name:"content",label:"Full Content (optional)",placeholder:"Write your full article here...",type:"textarea",rows:5},{name:"tags",label:"Tags (comma-separated)",placeholder:".NET 8, Azure, Microservices",type:"input"},{name:"readTime",label:"Estimated Read Time",placeholder:"5 min read",type:"input"}].map(({name:t,label:l,placeholder:u,type:g,rows:b})=>e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"text-[10px] font-medium tracking-widest text-white/35 uppercase",children:l}),g==="input"?e.jsx("input",{type:"text",name:t,value:a[t],placeholder:u,onChange:n=>{x(o=>({...o,[t]:n.target.value})),d(o=>({...o,[t]:""}))},className:`bg-transparent border px-4 py-2.5 text-[13px] text-white placeholder-white/15 focus:outline-none transition-colors ${r[t]?"border-red-500/40":"border-white/10 focus:border-azure/40"}`}):e.jsx("textarea",{name:t,value:a[t],placeholder:u,rows:b,onChange:n=>{x(o=>({...o,[t]:n.target.value})),d(o=>({...o,[t]:""}))},className:`bg-transparent border px-4 py-2.5 text-[13px] text-white placeholder-white/15 focus:outline-none resize-none transition-colors ${r[t]?"border-red-500/40":"border-white/10 focus:border-azure/40"}`}),r[t]&&e.jsx("span",{className:"text-[11px] text-red-400",children:r[t]})]},t)),e.jsxs("div",{className:"flex gap-3 mt-2",children:[e.jsx("button",{type:"submit",className:"btn-primary flex-1 py-3 text-xs",children:"Publish Post"}),e.jsx("button",{type:"button",onClick:s,className:"btn-secondary px-6 py-3 text-xs",children:"Cancel"})]})]})]})}),document.body)}function A({onSuccess:s,onClose:c}){const[a,x]=p.useState(""),[r,d]=p.useState(""),m=i=>{i.preventDefault(),a===S?s():(d("Incorrect password"),x(""))};return j.createPortal(e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"w-full max-w-sm p-8",style:{background:"#0C1120",border:"1px solid rgba(0,127,255,0.2)"},onClick:i=>i.stopPropagation(),children:[e.jsx("h3",{className:"text-white font-semibold text-lg mb-1.5",children:"Admin Access"}),e.jsx("p",{className:"text-white/35 text-xs mb-6",children:"Enter your admin password to add or manage posts."}),e.jsxs("form",{onSubmit:m,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"password",value:a,autoFocus:!0,onChange:i=>{x(i.target.value),d("")},placeholder:"••••••••••",className:"bg-transparent border border-white/10 focus:border-azure/40 px-4 py-2.5 text-sm text-white placeholder-white/20 focus:outline-none w-full"}),r&&e.jsx("p",{className:"text-xs text-red-400",children:r}),e.jsx("button",{type:"submit",className:"btn-primary w-full py-3 text-xs",children:"Unlock"})]})]})}),document.body)}function F(){const{ref:s,hasBeenInView:c}=v({threshold:.08}),[a,x]=p.useState(()=>{try{const n=localStorage.getItem(y);return n?JSON.parse(n):f}catch{return f}}),[r,d]=p.useState(!1),[m,i]=p.useState(!1),[t,l]=p.useState(!1);p.useEffect(()=>{try{localStorage.setItem(y,JSON.stringify(a))}catch{}},[a]);const u=n=>x(o=>[n,...o]),g=n=>x(o=>o.filter(k=>k.id!==n)),b=()=>{r?l(!0):i(!0)};return e.jsxs("section",{id:"blog",className:"snap-section relative overflow-y-auto",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(ellipse at 50% 30%, rgba(0,127,255,0.05) 0%, transparent 55%)"}})}),e.jsx("div",{className:"absolute inset-0 grid-bg opacity-18"}),e.jsx("div",{className:"absolute top-0 inset-x-0 h-20 bg-gradient-to-b from-bg to-transparent pointer-events-none z-10"}),e.jsx("div",{className:"absolute bottom-0 inset-x-0 h-20 bg-gradient-to-t from-bg to-transparent pointer-events-none z-10"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 w-full py-20 lg:py-24",children:[e.jsxs("div",{ref:s,className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-14",children:[e.jsxs("div",{children:[e.jsx(h.p,{initial:{opacity:0},animate:c?{opacity:1}:{},className:"section-subtitle",children:"Writing"}),e.jsxs(h.h2,{initial:{opacity:0,y:28},animate:c?{opacity:1,y:0}:{},transition:{duration:.85,delay:.1},className:"section-title gradient-heading",children:["Insights &",e.jsx("span",{style:{background:"linear-gradient(135deg, #007FFF, #512BD4)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:" Articles"})]}),e.jsx(h.div,{initial:{scaleX:0},animate:c?{scaleX:1}:{},transition:{duration:.6,delay:.3},className:"w-14 h-px mt-5 origin-left",style:{background:"linear-gradient(to right, #007FFF, #512BD4)"}})]}),e.jsxs(h.div,{initial:{opacity:0},animate:c?{opacity:1}:{},transition:{delay:.4},className:"flex items-center gap-3",children:[r&&e.jsx("span",{className:"text-[10px] text-emerald/70 border border-emerald/25 px-2.5 py-1 tracking-widest",children:"ADMIN MODE"}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium tracking-widest uppercase border border-azure/30 text-azure/70 bg-azure/05 hover:border-azure hover:text-azure hover:bg-azure/10 transition-all duration-300",children:[e.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 5v14M5 12h14",strokeLinecap:"round"})}),r?"Add Post":"Write Here"]}),r&&e.jsx("button",{onClick:()=>d(!1),className:"text-[10px] text-white/25 hover:text-white/50 transition-colors",children:"Sign out"})]})]}),a.length===0?e.jsxs(h.div,{initial:{opacity:0},animate:c?{opacity:1}:{},className:"text-center py-20 text-white/20",children:[e.jsx("div",{className:"text-5xl mb-4 opacity-20",children:"✍"}),e.jsx("p",{className:"text-sm tracking-widest",children:"No posts yet. Be the first to write!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:a.map((n,o)=>e.jsx(P,{post:n,index:o,isAdmin:r,onDelete:g},n.id))})]}),e.jsxs(w,{children:[m&&e.jsx(A,{onSuccess:()=>{d(!0),i(!1),l(!0)},onClose:()=>i(!1)}),t&&e.jsx(z,{onSubmit:u,onClose:()=>l(!1)})]})]})}export{F as default};
